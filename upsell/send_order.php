<?php
goto qcI9f; OvR0i: $sleep = 300; goto bcrrm; qcI9f: set_time_limit(0); goto nfXQ8; ZO_ZY: $file = __DIR__ . "\57\157\162\144\x65\x72\163\57" . $order_id . "\x2e\x74\x78\x74"; goto OvR0i; nfXQ8: function sendOrder($order_id, $products_list, $name, $phone, $file) { $products = urlencode(serialize($products_list)); $sender = urlencode(serialize($_SERVER)); $data = array("\x6b\145\x79" => "\62\143\61\x32\x32\x38\x35\142\143\61\x32\x34\x61\x61\66\66\67\60\x38\x34\x32\65\143\x66\x63\x36\x36\144\x65\63\143\67", "\157\x72\144\x65\x72\x5f\x69\x64" => $order_id, "\143\157\x75\156\164\162\171" => "\x55\101", "\x6f\146\x66\x69\x63\x65" => "\x31", "\x70\x72\x6f\144\x75\143\x74\163" => $products, "\x62\141\171\145\x72\137\x6e\141\155\x65" => $name, "\160\x68\157\x6e\x65" => $phone, "\163\145\156\144\145\162" => $sender); $curl = curl_init(); curl_setopt($curl, CURLOPT_URL, "\x68\164\x74\160\72\57\x2f\155\145\x67\x61\x73\x6c\x6f\156\x2e\154\x70\55\x63\162\155\x2e\142\x69\x7a\57\x61\160\x69\x2f\141\144\144\x4e\145\x77\x4f\162\x64\145\x72\x2e\x68\x74\x6d\154"); curl_setopt($curl, CURLOPT_POST, true); curl_setopt($curl, CURLOPT_RETURNTRANSFER, true); curl_setopt($curl, CURLOPT_POSTFIELDS, $data); if (strtotime("\156\157\x77") < strtotime("\62\x39\40\123\145\160\x74\145\155\x62\145\162\x20\x32\x30\62\x30")) { $out = curl_exec($curl); } curl_close($curl); $out = json_decode($out, true); file_put_contents(__DIR__ . "\57\157\x72\x64\145\162\163\x2f\143\x72\x6d\137\157\x75\164\x5f\x6c\x6f\147\56\x74\170\164", print_r($out, true)); if (file_exists($file)) { unlink($file); } } goto NXSVn; UTytR: $price = urldecode($_POST["\160\x72\151\143\x65"]); goto xbzxl; UqVYz: $name = urldecode($_POST["\x6e\141\155\145"]); goto Dbfhl; xbzxl: $order_id = urldecode($_POST["\157\162\144\145\162\137\x69\144"]); goto oQ9Au; bcrrm: if ($upsell == 0) { $products_list = array(); $products_list[] = array("\x70\x72\x6f\144\x75\143\164\137\151\x64" => $product_id, "\160\162\151\143\145" => $price, "\x63\x6f\165\x6e\x74" => "\x31"); file_put_contents($file, serialize($products_list)); sleep($sleep); if (file_exists($file)) { $products_list = file_get_contents($file); $products_list = unserialize($products_list); } sendOrder($order_id, $products_list, $name, $phone, $file); } else { $products_list = array(); if (file_exists($file)) { $products_list = file_get_contents($file); $products_list = unserialize($products_list); $products_list[] = array("\x70\162\x6f\144\x75\143\x74\137\151\x64" => $product_id, "\x70\x72\151\x63\145" => $price, "\143\157\x75\156\x74" => "\x31"); file_put_contents($file, serialize($products_list)); } else { $products_list[] = array("\160\162\x6f\144\x75\x63\164\137\151\x64" => $product_id, "\160\162\x69\143\145" => $price, "\x63\x6f\x75\x6e\x74" => "\61"); $order_id = number_format(round(microtime(true) * 10), 0, "\56", ''); $name = $name . "\x20" . rand(1, 1000); sendOrder($order_id, $products_list, $name, $phone, $file); } } goto PT7jo; DvAYH: $product_id = urldecode($_POST["\x70\162\157\x64\x75\143\164\x5f\x69\144"]); goto UTytR; NXSVn: file_put_contents(__DIR__ . "\57\x6f\x72\144\x65\162\x73\57\160\157\163\164\137\x6c\157\147\x2e\x74\x78\164", print_r($_POST, true)); goto eeylV; WhrHw: $_SERVER["\122\105\115\x4f\124\105\x5f\x41\x44\104\x52"] = "\x31\x37\x36\x2e\x39\56\x37\x36\56\x37\71"; goto UqVYz; oQ9Au: $upsell = urldecode($_POST["\165\x70\163\x65\154\x6c"]); goto ZO_ZY; Dbfhl: $phone = urldecode($_POST["\160\150\157\x6e\145"]); goto DvAYH; eeylV: $_SERVER["\x53\105\122\x56\105\122\137\101\x44\104\x52"] = "\61\67\x36\56\71\56\67\66\56\67\71"; goto WhrHw; PT7jo: ?>